<script setup>
import { ref } from 'vue';

const name = ref("Zm");

const storeName = ref("specs-ecommerce");

const phonePrice = ref(25000);

const deliveryFee = ref(5000);

const phoneImage = ref("https://tse3.mm.bing.net/th/id/OIP.jZpR_5wcr85yJ7EP9rXMTwHaE9?rs=1&pid=ImgDetMain&o=7&rm=3");

let likes = ref(0);

console.log(likes.value);

const stocks = ref({
  phoneBrands: [
    "Samsung A54",
    "Samsung S26",
    "Samsung A56",
    "Iphone X",

  ],

  phonePrices:   [
    "$400",
    "$2010",
    "$500",
    "$60",

  ],

  stockStatus:  [
    false,
    false,
    true,
    true,
  ],

  images: [
    "https://tse1.explicit.bing.net/th/id/OIP.v1IJyfgygGZSUbZ-KleBNwHaE7?rs=1&pid=ImgDetMain&o=7&rm=3",
    "https://tse3.mm.bing.net/th/id/OIP.CbCZjoQUGqKahc-QcsMQ8AHaEK?rs=1&pid=ImgDetMain&o=7&rm=3",
    "https://tse1.explicit.bing.net/th/id/OIP.g0wVBnMaa--JrxvUApCJcAHaE7?rs=1&pid=ImgDetMain&o=7&rm=3",
    "https://tse4.mm.bing.net/th/id/OIP.l55kijSVrMcymY8D8b-C1AHaFj?rs=1&pid=ImgDetMain&o=7&rm=3"

  ]

})


//array of liked ittems
const arrayOfLikedItems = ref([]);

// toggle like
const toggleLike = (value) => {

  //check if the array of liked items does not contain the item that is clicked to be liked
  if (!arrayOfLikedItems.value.includes(value)) {
    arrayOfLikedItems.value.push(value);
    likes.value++;

  }

  //when the item to be liked is already in the array of items that are liked
  //we remove the liked item from the array of liked items
  else if (arrayOfLikedItems.value.includes(value)) {
    const index = arrayOfLikedItems.value.indexOf(value);
    console.log(index);
    arrayOfLikedItems.value.splice(index, 1);
    likes.value--;
  }

  console.log(arrayOfLikedItems.value);


}
const clickme = () => {
  console.log("you clicked this button");
}

const itemisLiked = (item) => {
  return arrayOfLikedItems.value.includes(item)? true:false
}
</script>

<template>
  <div class="navbar">
      <h1>welcome {{ name }}</h1>
  </div>


  <button @click="clickme">display</button>
  <p>Exercise 1</p>
  <p>This is my store name {{ storeName }}</p>
  <p>we have the samasung going for ${{ phonePrice }}</p>
  <p>Delivery fee for the samsung is $ {{ deliveryFee }}</p>
  <p>It would cost you a total of ${{ phonePrice + deliveryFee }} to purchase this samsung</p>

  <p>Here is an image of the phone below</p>
  <div style="width: 200px; height: 200px; border: 1px solid black">
    <img v-bind:src="phoneImage" alt="" style="width: 100%; height: 100%">
  </div>

  <h1>List of phones and their prices</h1>
  <Ul>
    <li v-for="(value, index) in stocks.phoneBrands" :key="index">
      {{ value }} -> {{ stocks.phonePrices[index] }} ->
      <span v-if="stocks.stockStatus[index]">In stock</span>
      <span v-else>Out of stocks</span>
    </li>


  </Ul>
  <p class="ms-3" v-if="likes !== 0">You've liked a total of {{ likes }} of our items</p>
  <p class="ms-3" v-else>Youâ€™ve not liked or added any of our product to your wishlist</p>
  <div class="container">
    <div v-for="(value, index) in stocks.phoneBrands" :key="index" class="card">
      <div class="img-container">
        <img v-bind:src="stocks.images[index]" alt="">
        <div @click="toggleLike(value)" class="like-container">
          <span class="material-symbols-outlined" :class="{iconColorRed:itemisLiked(value)}">favorite</span>
        </div>
      </div>

      <p class="ms-3 mt-3"><b>{{ stocks.phoneBrands[index] }}</b></p>
      <p v-if="stocks.stockStatus[index]" class="ms-3">In stock</p>
      <p v-else class="ms-3">Out of stocks</p>
      <p class="ms-3">{{ stocks.phonePrices[index] }}</p>

    </div>
  </div>
</template>

<style scoped>
  .navbar{
    width: 100%;
    height: 10vh;
    background-color: black;
    color: white;
    display: flex;
    align-items: center;
  }

  .card{
    width: 250px;
    height: 350px;
    border: 1px solid black;
    margin-bottom: 10px;
    margin-left: 10px;
    border-radius: 5%;
    overflow: hidden;
  }

  .img-container{
    width: 100%;
    height: 50%;
    border: 1px solid black;
    position: relative;
  }

  .img-container img{
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .container{
    width: 100%;
    height: auto;
    display: flex;
    justify-content: space-evenly;
  }

  .ms-3{
    margin-left: 10px;
  }

  .mt-3{
    margin-top: 20px;
  }
  .like-container{
    width: 30px;
    height: 30px;
    background-color: white;
    position: absolute;
    top: 10px;
    left: 210px;
    border-radius: 100%;
    transition: background-color 0.3s ease-in-out 0s;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;

  }

  .like-container:hover{
    background-color: silver;
  }


.material-symbols-outlined {
  font-size: 20px;
  color: black;

  /* font-variation-settings:
    'FILL' 1,   0 = outline, 1 = filled
    'wght' 400,
    'GRAD' 0,
    'opsz' 24; */
}

.iconColorRed{
  color: red;

  font-variation-settings:
  'FILL' 1,   /*0 = outline, 1 = filled */
  'wght' 400,
  'GRAD' 0,
  'opsz' 24;
}
</style>
